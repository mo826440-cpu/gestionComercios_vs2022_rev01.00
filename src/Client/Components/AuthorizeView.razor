@using Shared.Services
@inject IAuthService AuthService
@inject NavigationManager Navigation

@if (authorized)
{
    @ChildContent
}
else if (NotAuthorized != null)
{
    @NotAuthorized
}

@code {
    [Parameter] public RenderFragment? ChildContent { get; set; }
    [Parameter] public RenderFragment? NotAuthorized { get; set; }
    [Parameter] public string? Roles { get; set; }

    private bool authorized = false;
    private bool isLoading = true;

    protected override async Task OnInitializedAsync()
    {
        authorized = await AuthService.IsAuthenticatedAsync();
        
        // Si hay roles requeridos, verificar aquí (requeriría AuthorizationService)
        // Por ahora solo verificamos autenticación básica
        
        isLoading = false;
        StateHasChanged();
    }
}


@page "/registro"
@using Shared.Services
@using Shared.Models
@inject IAuthService AuthService
@inject IComercioService ComercioService
@inject IUsuarioService UsuarioService
@inject IRolService RolService
@inject IIdGeneratorService IdGeneratorService
@inject ISolicitudRegistroService SolicitudRegistroService
@inject ISupabaseService SupabaseService
@inject NavigationManager Navigation
@inject IToastService ToastService

<PageTitle>Registro - Gesti√≥n Comercios</PageTitle>

<div class="registro-container">
    <div class="registro-card">
        <h2>Crear Cuenta</h2>
        <p class="text-muted">Completa los siguientes datos para crear tu cuenta y comercio</p>

        @if (!string.IsNullOrEmpty(errorMessage))
        {
            <div class="alert alert-danger">@errorMessage</div>
        }

        @if (!string.IsNullOrEmpty(successMessage))
        {
            <div class="alert alert-success">@successMessage</div>
        }

        <EditForm Model="@registroModel" OnValidSubmit="@HandleRegistro">
            <DataAnnotationsValidator />

            <!-- Paso 1: Validaci√≥n de Email -->
            @if (currentStep == 1)
            {
                <div class="step-content">
                    <h4>Paso 1: Validaci√≥n de Email</h4>
                    <div class="form-group">
                        <label for="email">Email *</label>
                        <InputText id="email" type="email" @bind-Value="registroModel.Email" class="form-control" />
                        <ValidationMessage For="@(() => registroModel.Email)" />
                    </div>
                    <div class="form-group">
                        <label for="confirmEmail">Confirmar Email *</label>
                        <InputText id="confirmEmail" type="email" @bind-Value="registroModel.ConfirmEmail" class="form-control" />
                        <ValidationMessage For="@(() => registroModel.ConfirmEmail)" />
                        <small class="form-text text-muted">Solo emails autorizados pueden registrarse</small>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" @onclick="Cancelar">Cancelar</button>
                        <button type="button" class="btn btn-primary" @onclick="ValidarEmail" disabled="@isLoading">
                            @if (isLoading)
                            {
                                <span>Procesando...</span>
                            }
                            else
                            {
                                <span>Continuar</span>
                            }
                        </button>
                    </div>
                </div>
            }

            <!-- Paso 1.5: Verificaci√≥n de C√≥digo (si email no autorizado) -->
            @if (currentStep == 1.5)
            {
                <div class="step-content">
                    <h4>Verificaci√≥n de Email</h4>
                    <div class="alert alert-info">
                        <p><strong>Email no autorizado:</strong> @registroModel.Email</p>
                        <p>Para registrarte, necesitas un c√≥digo de verificaci√≥n que ser√° enviado a tu email una vez que un administrador apruebe tu solicitud.</p>
                        <p>Se ha enviado una solicitud de aprobaci√≥n a <strong>mo826440@gmail.com</strong>.</p>
                    </div>
                    
                    @if (!string.IsNullOrEmpty(successMessage))
                    {
                        <div class="alert alert-success">@successMessage</div>
                    }

                    <div class="form-group">
                        <label for="codigoVerificacion">C√≥digo de Verificaci√≥n *</label>
                        <InputText id="codigoVerificacion" type="text" @bind-Value="codigoVerificacion" 
                                   class="form-control" placeholder="Ingresa el c√≥digo de 6 d√≠gitos" 
                                   maxlength="6" disabled="@isVerificando" />
                        <small class="form-text text-muted">
                            Ingresa el c√≥digo de 6 d√≠gitos que recibiste por email despu√©s de que tu solicitud sea aprobada.
                        </small>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" @onclick="VolverAValidacionEmail">Volver</button>
                        <button type="button" class="btn btn-primary" @onclick="VerificarCodigo" disabled="@isVerificando">
                            @if (isVerificando)
                            {
                                <span>Verificando...</span>
                            }
                            else
                            {
                                <span>Verificar C√≥digo</span>
                            }
                        </button>
                    </div>
                </div>
            }

            <!-- Paso 2: Datos Personales -->
            @if (currentStep == 2)
            {
                <div class="step-content">
                    <h4>Paso 2: Datos Personales</h4>
                    <div class="form-group">
                        <label for="nombre">Nombre y Apellido *</label>
                        <InputText id="nombre" @bind-Value="registroModel.Nombre" class="form-control" />
                        <ValidationMessage For="@(() => registroModel.Nombre)" />
                    </div>
                    <div class="form-group">
                        <label for="usuario">Usuario *</label>
                        <InputText id="usuario" @bind-Value="registroModel.Usuario" class="form-control" />
                        <ValidationMessage For="@(() => registroModel.Usuario)" />
                        <small class="form-text text-muted">Este ser√° tu nombre de usuario para ingresar al sistema</small>
                    </div>
                    <div class="form-group">
                        <label for="contacto">Contacto (Tel√©fono/Celular) *</label>
                        <InputText id="contacto" @bind-Value="registroModel.Contacto" class="form-control" />
                        <ValidationMessage For="@(() => registroModel.Contacto)" />
                    </div>
                    <div class="form-group">
                        <label for="password">Contrase√±a *</label>
                        <div class="password-input-container">
                            <InputText id="password" type="@(showPassword ? "text" : "password")" @bind-Value="registroModel.Password" class="form-control" />
                            <button type="button" class="btn-toggle-password" @onclick="TogglePasswordVisibility" title="@(showPassword ? "Ocultar contrase√±a" : "Mostrar contrase√±a")">
                                @if (showPassword)
                                {
                                    <span>üëÅÔ∏è</span>
                                }
                                else
                                {
                                    <span>üëÅÔ∏è‚Äçüó®Ô∏è</span>
                                }
                            </button>
                        </div>
                        <ValidationMessage For="@(() => registroModel.Password)" />
                        <small class="form-text text-muted">M√≠nimo 6 caracteres</small>
                    </div>
                    <div class="form-group">
                        <label for="confirmPassword">Confirmar Contrase√±a *</label>
                        <InputText id="confirmPassword" type="password" @bind-Value="registroModel.ConfirmPassword" class="form-control" />
                        <ValidationMessage For="@(() => registroModel.ConfirmPassword)" />
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" @onclick="Anterior">Anterior</button>
                        <button type="button" class="btn btn-primary" @onclick="Siguiente">Siguiente</button>
                    </div>
                </div>
            }

            <!-- Paso 3: Datos del Comercio -->
            @if (currentStep == 3)
            {
                <div class="step-content">
                    <h4>Paso 3: Datos del Comercio</h4>
                    <div class="form-group">
                        <label for="comercioNombre">Nombre del Comercio *</label>
                        <InputText id="comercioNombre" @bind-Value="registroModel.ComercioNombre" class="form-control" />
                        <ValidationMessage For="@(() => registroModel.ComercioNombre)" />
                    </div>
                    <div class="form-group">
                        <label for="comercioTelefono">Tel√©fono</label>
                        <InputText id="comercioTelefono" @bind-Value="registroModel.ComercioTelefono" class="form-control" />
                    </div>
                    <div class="form-group">
                        <label for="comercioDireccion">Direcci√≥n</label>
                        <InputTextArea id="comercioDireccion" @bind-Value="registroModel.ComercioDireccion" class="form-control" rows="3" />
                    </div>
                    <div class="form-group">
                        <div class="form-check">
                            <InputCheckbox id="aceptarTerminos" @bind-Value="registroModel.AceptarTerminos" class="form-check-input" />
                            <label class="form-check-label" for="aceptarTerminos">
                                Acepto los <a href="/terminos-condiciones" target="_blank">T√©rminos y Condiciones</a> *
                            </label>
                        </div>
                        <ValidationMessage For="@(() => registroModel.AceptarTerminos)" />
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" @onclick="Anterior">Anterior</button>
                        <button type="submit" class="btn btn-primary" disabled="@isLoading">
                            @if (isLoading)
                            {
                                <span>Creando cuenta...</span>
                            }
                            else
                            {
                                <span>Crear Cuenta</span>
                            }
                        </button>
                    </div>
                </div>
            }
        </EditForm>

        <div class="mt-3 text-center">
            <p>¬øYa tienes una cuenta? <a href="/login">Iniciar Sesi√≥n</a></p>
        </div>
    </div>
</div>

@code {
    private RegistroModel registroModel = new();
    private string errorMessage = string.Empty;
    private string successMessage = string.Empty;
    private bool isLoading = false;
    private bool showPassword = false;
    private double currentStep = 1; // Cambiado a double para permitir paso 1.5
    private string codigoVerificacion = string.Empty;
    private bool isVerificando = false;
    private bool solicitudCreada = false;

    // Email autorizado (temporal - se reemplazar√° por sistema de pago)
    private const string EMAIL_AUTORIZADO = "mo846440@gmail.com";
    private const string ADMIN_EMAIL = "mo826440@gmail.com";

    private class RegistroModel
    {
        [System.ComponentModel.DataAnnotations.Required(ErrorMessage = "El email es requerido")]
        [System.ComponentModel.DataAnnotations.EmailAddress(ErrorMessage = "Email inv√°lido")]
        public string Email { get; set; } = string.Empty;

        [System.ComponentModel.DataAnnotations.Required(ErrorMessage = "Debes confirmar el email")]
        [System.ComponentModel.DataAnnotations.Compare("Email", ErrorMessage = "Los emails no coinciden")]
        public string ConfirmEmail { get; set; } = string.Empty;

        [System.ComponentModel.DataAnnotations.Required(ErrorMessage = "El nombre y apellido es requerido")]
        public string Nombre { get; set; } = string.Empty;

        [System.ComponentModel.DataAnnotations.Required(ErrorMessage = "El nombre de usuario es requerido")]
        [System.ComponentModel.DataAnnotations.MinLength(3, ErrorMessage = "El usuario debe tener al menos 3 caracteres")]
        public string Usuario { get; set; } = string.Empty;

        [System.ComponentModel.DataAnnotations.Required(ErrorMessage = "El contacto es requerido")]
        public string Contacto { get; set; } = string.Empty;

        [System.ComponentModel.DataAnnotations.Required(ErrorMessage = "La contrase√±a es requerida")]
        [System.ComponentModel.DataAnnotations.MinLength(6, ErrorMessage = "La contrase√±a debe tener al menos 6 caracteres")]
        public string Password { get; set; } = string.Empty;

        [System.ComponentModel.DataAnnotations.Required(ErrorMessage = "Debes confirmar la contrase√±a")]
        [System.ComponentModel.DataAnnotations.Compare("Password", ErrorMessage = "Las contrase√±as no coinciden")]
        public string ConfirmPassword { get; set; } = string.Empty;

        [System.ComponentModel.DataAnnotations.Required(ErrorMessage = "El nombre del comercio es requerido")]
        public string ComercioNombre { get; set; } = string.Empty;

        public string? ComercioTelefono { get; set; }
        public string? ComercioDireccion { get; set; }

        [System.ComponentModel.DataAnnotations.Required(ErrorMessage = "Debes aceptar los t√©rminos y condiciones")]
        public bool AceptarTerminos { get; set; } = false;
    }

    private void TogglePasswordVisibility()
    {
        showPassword = !showPassword;
    }

    private void ValidarEmail()
    {
        errorMessage = string.Empty;
        StateHasChanged();

        if (string.IsNullOrWhiteSpace(registroModel.Email))
        {
            errorMessage = "Por favor, ingresa un email";
            StateHasChanged();
            return;
        }

        if (!System.Text.RegularExpressions.Regex.IsMatch(registroModel.Email, @"^[^@\s]+@[^@\s]+\.[^@\s]+$"))
        {
            errorMessage = "El formato del email no es v√°lido";
            StateHasChanged();
            return;
        }

        if (string.IsNullOrWhiteSpace(registroModel.ConfirmEmail))
        {
            errorMessage = "Por favor, confirma tu email";
            StateHasChanged();
            return;
        }

        if (registroModel.Email != registroModel.ConfirmEmail)
        {
            errorMessage = "Los emails no coinciden";
            StateHasChanged();
            return;
        }

        if (!registroModel.Email.Equals(EMAIL_AUTORIZADO, StringComparison.OrdinalIgnoreCase))
        {
            // Email no autorizado - mostrar panel de verificaci√≥n
            isLoading = true;
            StateHasChanged();

            try
            {
                // Verificar si ya existe una solicitud verificada para este email
                var solicitudExistente = await SolicitudRegistroService.GetByEmailAsync(registroModel.Email);
                
                if (solicitudExistente != null && solicitudExistente.Estado == "verificada")
                {
                    // Ya est√° verificado, permitir continuar
                    currentStep = 2;
                    isLoading = false;
                    StateHasChanged();
                    return;
                }

                // Crear o obtener solicitud
                var solicitud = await SolicitudRegistroService.CreateAsync(registroModel.Email);
                
                if (solicitud != null && !solicitudCreada)
                {
                    // Llamar a Edge Function para enviar email al admin
                    try
                    {
                        var response = await SupabaseService.Client.Functions.InvokeAsync("solicitar-registro", new
                        {
                            emailSolicitante = registroModel.Email
                        });

                        if (response != null)
                        {
                            solicitudCreada = true;
                            successMessage = $"Se ha enviado una solicitud de aprobaci√≥n a {ADMIN_EMAIL}. Una vez aprobada, recibir√°s un c√≥digo de verificaci√≥n por email.";
                        }
                    }
                    catch (Exception ex)
                    {
                        Console.WriteLine($"Error al llamar Edge Function: {ex}");
                        // Continuar aunque falle el email, la solicitud ya est√° creada
                        successMessage = "Solicitud creada. Si no recibes el email de aprobaci√≥n, contacta al administrador.";
                    }
                }

                // Mostrar panel de verificaci√≥n
                currentStep = 1.5;
                errorMessage = string.Empty;
            }
            catch (Exception ex)
            {
                errorMessage = $"Error al procesar la solicitud: {ex.Message}";
                Console.WriteLine($"Error: {ex}");
            }
            finally
            {
                isLoading = false;
                StateHasChanged();
            }
            return;
        }

        // Email v√°lido, pasar al siguiente paso
        currentStep = 2;
        StateHasChanged();
    }

    private async Task VerificarCodigo()
    {
        if (string.IsNullOrWhiteSpace(codigoVerificacion))
        {
            errorMessage = "Por favor, ingresa el c√≥digo de verificaci√≥n";
            StateHasChanged();
            return;
        }

        if (codigoVerificacion.Length != 6)
        {
            errorMessage = "El c√≥digo debe tener 6 d√≠gitos";
            StateHasChanged();
            return;
        }

        isVerificando = true;
        errorMessage = string.Empty;
        StateHasChanged();

        try
        {
            var codigoValido = await SolicitudRegistroService.VerificarCodigoAsync(registroModel.Email, codigoVerificacion);

            if (codigoValido)
            {
                // C√≥digo correcto, marcar como verificada y continuar
                await SolicitudRegistroService.MarcarComoVerificadaAsync(registroModel.Email);
                ToastService.ShowSuccess("C√≥digo verificado correctamente. Puedes continuar con el registro.");
                currentStep = 2;
                errorMessage = string.Empty;
                successMessage = string.Empty;
            }
            else
            {
                var solicitud = await SolicitudRegistroService.GetByEmailAsync(registroModel.Email);
                if (solicitud != null)
                {
                    if (solicitud.Estado == "expirada")
                    {
                        errorMessage = "El c√≥digo ha expirado. Por favor, solicita una nueva aprobaci√≥n.";
                    }
                    else if (solicitud.IntentosVerificacion >= solicitud.MaxIntentos)
                    {
                        errorMessage = "Has excedido el n√∫mero m√°ximo de intentos. Por favor, contacta al administrador.";
                    }
                    else
                    {
                        errorMessage = $"C√≥digo incorrecto. Intentos restantes: {solicitud.MaxIntentos - solicitud.IntentosVerificacion}";
                    }
                }
                else
                {
                    errorMessage = "C√≥digo incorrecto o solicitud no encontrada.";
                }
            }
        }
        catch (Exception ex)
        {
            errorMessage = $"Error al verificar el c√≥digo: {ex.Message}";
            Console.WriteLine($"Error: {ex}");
        }
        finally
        {
            isVerificando = false;
            StateHasChanged();
        }
    }

    private void VolverAValidacionEmail()
    {
        currentStep = 1;
        codigoVerificacion = string.Empty;
        errorMessage = string.Empty;
        successMessage = string.Empty;
        StateHasChanged();
    }

    private async Task Siguiente()
    {
        errorMessage = string.Empty;
        StateHasChanged();

        // Validar nombre
        if (string.IsNullOrWhiteSpace(registroModel.Nombre))
        {
            errorMessage = "El nombre y apellido es requerido";
            StateHasChanged();
            return;
        }

        // Validar usuario
        if (string.IsNullOrWhiteSpace(registroModel.Usuario))
        {
            errorMessage = "El nombre de usuario es requerido";
            StateHasChanged();
            return;
        }

        if (registroModel.Usuario.Length < 3)
        {
            errorMessage = "El usuario debe tener al menos 3 caracteres";
            StateHasChanged();
            return;
        }

        // Validar contacto
        if (string.IsNullOrWhiteSpace(registroModel.Contacto))
        {
            errorMessage = "El contacto es requerido";
            StateHasChanged();
            return;
        }

        // Validar contrase√±as
        if (string.IsNullOrWhiteSpace(registroModel.Password))
        {
            errorMessage = "La contrase√±a es requerida";
            StateHasChanged();
            return;
        }

        if (registroModel.Password.Length < 6)
        {
            errorMessage = "La contrase√±a debe tener al menos 6 caracteres";
            StateHasChanged();
            return;
        }

        if (registroModel.Password != registroModel.ConfirmPassword)
        {
            errorMessage = "Las contrase√±as no coinciden";
            StateHasChanged();
            return;
        }

        currentStep = 3;
        StateHasChanged();
    }

    private void Anterior()
    {
        if (currentStep > 1)
        {
            currentStep--;
            errorMessage = string.Empty;
        }
    }

    private void Cancelar()
    {
        Navigation.NavigateTo("/");
    }

    private async Task HandleRegistro()
    {
        isLoading = true;
        errorMessage = string.Empty;
        successMessage = string.Empty;
        StateHasChanged();

        try
        {
            // Validar t√©rminos y condiciones
            if (!registroModel.AceptarTerminos)
            {
                errorMessage = "Debes aceptar los t√©rminos y condiciones para continuar";
                isLoading = false;
                StateHasChanged();
                return;
            }

            // 1. Crear usuario en Supabase Auth
            var authSession = await AuthService.SignUpAsync(registroModel.Email, registroModel.Password);
            
            if (authSession == null || authSession.User == null)
            {
                errorMessage = "Error al crear la cuenta. Por favor, intenta nuevamente.";
                isLoading = false;
                StateHasChanged();
                return;
            }

            // El ID de Supabase Auth puede ser string, convertirlo a Guid
            Guid authUserId;
            if (!Guid.TryParse(authSession.User.Id, out authUserId))
            {
                errorMessage = "Error al obtener el ID del usuario. Por favor, intenta nuevamente.";
                isLoading = false;
                StateHasChanged();
                return;
            }

            // 2. Generar ID p√∫blico del comercio
            var idPublicoComercio = await IdGeneratorService.GenerateIdPublicoComercioAsync();

            // 3. Crear el comercio
            var comercio = new Comercio
            {
                Id = Guid.NewGuid(),
                Nombre = registroModel.ComercioNombre,
                Email = registroModel.Email,
                Telefono = registroModel.ComercioTelefono,
                Direccion = registroModel.ComercioDireccion,
                IdPublico = idPublicoComercio,
                Activo = true,
                CreatedAt = DateTime.UtcNow
            };

            var comercioCreado = await ComercioService.CreateAsync(comercio);

            // 4. Obtener el rol de admin
            var rolAdmin = await RolService.GetAdminRoleAsync();
            if (rolAdmin == null)
            {
                // Si no existe el rol admin, usar EsPropietario = true como fallback
                ToastService.ShowWarning("Rol admin no encontrado. Se asignar√° como propietario.");
            }

            // 5. Generar ID p√∫blico del usuario
            var idPublicoUsuario = await IdGeneratorService.GenerateIdPublicoAsync(comercioCreado.Id, "usuarios");

            // 6. Crear el usuario en la tabla usuarios
            var usuario = new Usuario
            {
                Id = Guid.NewGuid(),
                AuthUserId = authUserId,
                ComercioId = comercioCreado.Id,
                RolId = rolAdmin?.Id,
                Nombre = registroModel.Nombre,
                NombreUsuario = registroModel.Usuario,
                Contacto = registroModel.Contacto,
                IdPublico = idPublicoUsuario,
                Activo = true,
                EsPropietario = true, // El usuario que se registra es propietario/admin
                CreatedAt = DateTime.UtcNow
            };

            await UsuarioService.CreateAsync(usuario);

            // TODO: Enviar notificaci√≥n por email a mo826440@gmail.com
            // Por ahora, solo mostramos un mensaje
            ToastService.ShowInfo("Se ha enviado una notificaci√≥n al administrador para aprobar tu registro.");

            successMessage = "¬°Cuenta creada exitosamente! Tu registro est√° pendiente de aprobaci√≥n. Te notificaremos cuando sea aprobado.";
            ToastService.ShowSuccess("Cuenta creada exitosamente");

            // Esperar un momento y redirigir al login
            await Task.Delay(3000);
            Navigation.NavigateTo("/login");
        }
        catch (InvalidOperationException ex)
        {
            // Error de validaci√≥n (ej: usuario duplicado)
            errorMessage = ex.Message;
            ToastService.ShowError(ex.Message);
        }
        catch (Exception ex)
        {
            errorMessage = $"Error al crear la cuenta: {ex.Message}";
            ToastService.ShowError($"Error: {ex.Message}");
            Console.WriteLine($"Error en registro: {ex}");
        }
        finally
        {
            isLoading = false;
            StateHasChanged();
        }
    }
}

<style>
    .registro-container {
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        padding: 2rem;
    }

    .registro-card {
        background: white;
        border-radius: 12px;
        padding: 2.5rem;
        box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        width: 100%;
        max-width: 600px;
    }

    .registro-card h2 {
        margin-bottom: 0.5rem;
        color: #333;
    }

    .step-content {
        margin-top: 2rem;
    }

    .step-content h4 {
        color: #667eea;
        margin-bottom: 1.5rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid #667eea;
    }

    .form-group {
        margin-bottom: 1.5rem;
    }

    .form-group label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 500;
        color: #333;
    }

    .form-control {
        width: 100%;
        padding: 0.75rem;
        border: 1px solid #ddd;
        border-radius: 6px;
        font-size: 1rem;
    }

    .form-control:focus {
        border-color: #667eea;
        outline: none;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .password-input-container {
        position: relative;
        display: flex;
        align-items: center;
    }

    .btn-toggle-password {
        position: absolute;
        right: 0.5rem;
        background: none;
        border: none;
        cursor: pointer;
        padding: 0.25rem 0.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #666;
        font-size: 1.2rem;
    }

    .btn-toggle-password:hover {
        color: #333;
    }

    .form-actions {
        display: flex;
        gap: 1rem;
        justify-content: flex-end;
        margin-top: 2rem;
    }

    .btn {
        padding: 0.75rem 1.5rem;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 1rem;
        transition: all 0.3s ease;
    }

    .btn-primary {
        background-color: #667eea;
        color: white;
    }

    .btn-primary:hover:not(:disabled) {
        background-color: #5568d3;
    }

    .btn-secondary {
        background-color: #6c757d;
        color: white;
    }

    .btn-secondary:hover {
        background-color: #5a6268;
    }

    .btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
    }

    .alert {
        padding: 1rem;
        border-radius: 6px;
        margin-bottom: 1.5rem;
    }

    .alert-danger {
        background-color: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
    }

    .alert-success {
        background-color: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
    }

    .form-text {
        font-size: 0.875rem;
        color: #6c757d;
    }
</style>

